

node.js 중요 개념 정리

콜백 함수

동기/비동기

블로킹 : 단일 쓰레드에서 나옴 . 메모리나 외부 디바이스드르하고 작업할 때 처리 시간이 필요한데 그 딜레이 떄문에 블럭(손실)이 발생한다 cpu를 풀로 못돌리는 것

        그래서 이 것을 해결하기위해 쓰레드를 하나 더 만들어서, 한 쓰레드에는 작업을 맡겨놓고 다른 쓰레드는 기다리지 않고 다른 작업을 실행하는 것.

논블로킹

자바에서는 블로깅 논블로킹을 쓰레드로 처리

동기/비동기, 블로킹/넌블로킹 차이가 무엇인가??

공통점 : <br />
차이점 :

크롬 v8엔진을 jvm처럼 띄어서 쓰는 것이 node.js.

electron 윈도우 ui를 자바스크립트로 만들 수 있는 프레임 워크

크롬os -> 브라우저 자체가 os가 되버린것 우리가 만든 자바스크립트, css기반으로 만든 것을 모두 브라우저에서 쓸 수 있는 것.

### Web Server 기본 개념

* API(Application Programming Interface): 프로그램(=어플리케이션 혹은 앱)을 쉽게 제작할 수 있게 미리 만들어 놓은 것들의 모음
* 클라이언트 : 다른 곳에 있는 단말에 데이터를 달라고 요청하는 프로그램
* 서버 : 다른 곳에서 요청받은 명령을 처리해주는 프로그램
    * 서버는 포트를 지정하여 그 포트로 요청을 받는다. ( 포트 : 단말에 접속하기 위한 '논리적인 접속 위치')
    * 즉, 서버를 만들어 실행하면 지정된 포트에서 클라이언트로부터 요청을 받아 처리
* 웹 서버 : 웹 브라우저에서 접속하는 서버. HTTP 프로토콜 사용
* 프로토콜(Protocol) : 데이터를 서로 어떤 형태로 주고받을 것인지를 정한 것. 주고받는 데이터의 형태
* 에이잭스(Ajax, Asynchronous Javascript And XML) : 웹 서버에서 웹 문서를 받아오는 것이 아니라 데이터만 받아오기 위한 방법과 기술.
    * 매번 웹 문서를 가져오지 않고 필요한 데이터만 가져온 후 화면을 부분적으로 갱신하므로 화면 처리 속도가 비약적으로 빨라진다.

* 서버 유형 별 기능 정리
    * 모든 서버의 기본은 웹 서버이다. 이 웹 서버에서 기능에 따라 주요한 서버 유형이 나뉜다.
        1. 웹 서버의 기능과 구현
            * localhost: 인터넷상에 있는 다른 PC나 단말에 연결하려고 할 때 IP와 같은 단말 주소를 사용하는데, 다른 단말이 아닌 자기 자신을 가리길 때 localhost라고 한다.
        2. 채팅 서버의 기능과 구현
        3. JSON-RPC 서버의 기능과 구현
            * JSON-RPC 서버 : 서버 쪽에 함수를 만들어 두고 클라이언트에서 함수를 호출하듯이 데이터를 요청하면 응답하는 서버. JSON(JavaScript Object Notation) 이 표준 데이터 포맷(데이터의 형식)이고 RPC(Remote Procedure Call)방식으로 데이터를 주고 받는다.
            * 핸들러 : 서버에 등록된 함수.
        4. 위치 기반 서비스 서버의 기능과 구현
            * 공간 데이터 : 지구상에 있는 집, 도로 등을 점이나 선 등의 형태로 나타낸 위치 데이터. 위도 경도로 된 좌표 값으로 표현
            * 공간 인덱싱 : 공간 데이터와 같은 2차원 데이터는 1차원 데이터를 다룰 때 쓰는 B-Tree 인덱싱 방법을 쓰며 속도가 너무 느리다. 따라서 2차원 공간 데이터를 빠르게 조회하기 위해 만든 방법. R-Tree, R*Tree 등이 있다.
        5. 모바일 서비의 기능과 구현.
            * 모바일 서버 : 모바일 단말을 사용할 때 필요한 기능을 제공하는 서버. 주로 모바일 단말 전용 기능을 사용해야 할 때 따로 구축한다. 기본적으로 웹 서버에서 웬만한 것들은 구현 가능.

### Node.js

노드(Node.js) : 자바스크립트를 이용해서 서버를 만들 수 있는 개발 도구.

기존의 웹 서버 동작 방식 : 동기 입출력(Blocking IO). 하나의 요청 작업이 끝날 때까지 다른 작업을 할 수 없다.

노드 동작 방식 : 비동기 입출력(Non-blocking IO). 하나의 요청 처리가 끝날 때까지 기다리지 않고 다른 요청을 동시에 처리할 수 있다. 이것이 가능한 이유는 콜백 함수 때문이다.

* 콜백 함수 : 파라미터로 전달된 함수를 다른 함수의 내부에서 호출하는 것.

코드로 보는 것이 굉장히 깔끔해서 인용한다.

* 동기 입출력 방식

~~~ javascript

//raed 메서드를 실행한다. 이 메서드가 끝나기 전에는 doShow()메서드가 실행되지 않는다.
var contents = file.read("a.txt");

--- 끝날 때까지 대기 ---

doShow(contents);

var result = doAdd(10,10);

~~~

* 비동기 입출력 방식

~~~ javascript

//read 메서드로 'a.txt'라는 스트링을 읽음과 동시에 콜백함수를 실행한다. read 메서드가 끝났던 끝나지 않았던 콜백 함수는 doShow(contents)를 실행한다. 따라서 위의 예와 달리 read 메서드 작업 종료를 기다리지 않고 doShow()메서드를 실행하면서 동시에 두 가지 작업을 할 수 있는 것이다.
file.read('a.txt', function(contents){
    doShow(contents);
});

var result = doAdd(10,10)

~~~

* 이벤트 기반 입출력(Event driven I/O) : 파일 시스템이 이벤트와 함께 호출하는 방식.

* v8엔진 노드의 시스템 구조

![Smithsonian Image](http://wildpup.cafe24.com/wp-content/uploads/2014/07/nodejsarch.png)

* 스레드 풀 : 필요한 기능을 병렬로 실행
* 이벤트 루프 : 이벤트를 받아 처리
* 소켓, http library : 네트워킹 기능 담당

* 모듈(Module) : 모듈 메인이 되는 자바스크립트 파일의 일부 코드를 떼어 별도의 파일로 만드는 것
    - 외부 파일에 모듈을 정의한 후, require 함수로 호출한다.
* 패키지 : 여러개의 모듈을 합친 것.







